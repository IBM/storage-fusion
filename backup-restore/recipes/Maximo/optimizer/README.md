Backup
----

### Steps for Maximo Optimizer namespace backup

1. cd to `maximo/optimizer`
2. Export Optimizer required variables, this can be achieving by sourcing the `maximo_env.sh`:
    ```
    MAS_INSTANCE_ID (REQUIRED)
    MAS_WORKSPACE_ID (REQUIRED)
    ```

    e.g
    `export MAS_INSTANCE_ID=inst1`
    `export MAS_WORKSPACE_ID=dev`


2. Run the prerequisite script, for more information, run with the `-h` option

    `./scripts/backup-pre-req.sh`

3. Apply the local recipe (frcpe) generated by the backup-pre-req script

    `oc apply -f maximo-optimizer-backup-restore-local.yaml`

4. From Fusion Console, create backup policy (fbp) specifying the frequency for backups
5. From Fusion Console, associate the backup policy to the Optimizer application. 
6. Retrieve the Policy Assignment Name:

    `oc get fpa -n ibm-spectrum-fusion-ns -o custom-columns=NAME:.metadata.name --no-headers`
7. Update policy assignments (fpa) with recipe name and namespace

    `oc -n ibm-spectrum-fusion-ns patch fpa <policy-assignment-name> --type merge -p '{"spec":{"recipe":{"name":"maximo-optimizer-backup-restore-recipe", "namespace":"ibm-spectrum-fusion-ns"}}}'`
    ```
    recipe:
        name: maximo-optimizer-backup-restore-recipe
        namespace: ibm-spectrum-fusion-ns
    ```

Restore
----
### Prerequisite: 
Maximo Core and its prerequisites.

**Optional:** Application db2u is optional prerequisite if it was configured on cluster

### Steps for Maximo Optimizer namespace restore
1. Before restoring application run the prerequisite script:

    `./scripts/restore-pre-req.sh`
2. Start Optimizer namespace restore to same or alternate cluster.
