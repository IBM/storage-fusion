kind: ConfigMap
apiVersion: v1
metadata:
  name: ibm-fusion-fleet-dashboard
  namespace: open-cluster-management-observability
  labels:
    grafana-custom-dashboard: "true"
data:
  ibm-fusion-fleet-dashboard.json: |
    {"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 63, "links": [], "panels": [{"datasource": {"type": "prometheus", "uid": "000000001"}, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Risks"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "#EAB839", "value": 1}, {"color": "red", "value": 10}]}}, {"id": "custom.cellOptions", "value": {"type": "color-background"}}]}, {"matcher": {"id": "byName", "options": "Switches"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}, {"color": "green", "value": 0}, {"color": "red", "value": 1}]}}, {"id": "custom.cellOptions", "value": {"type": "color-background"}}]}, {"matcher": {"id": "byName", "options": "Nodes"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}, {"color": "green", "value": 0}, {"color": "red", "value": 1}]}}, {"id": "custom.cellOptions", "value": {"type": "color-background"}}]}, {"matcher": {"id": "byName", "options": "Services"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, {"id": "custom.cellOptions", "value": {"type": "color-background"}}]}]}, "gridPos": {"h": 8, "w": 24, "x": 0, "y": 0}, "id": 5, "options": {"cellHeight": "sm", "footer": {"countRows": false, "fields": "", "reducer": ["sum"], "show": false}, "showHeader": true}, "pluginVersion": "11.1.5", "targets": [{"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "exemplar": false, "expr": "isf_cluster_details", "format": "table", "instant": true, "legendFormat": "__auto", "range": false, "refId": "A"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "exemplar": false, "expr": "sum by (cluster) (1 - isf_service)", "format": "table", "hide": false, "instant": true, "legendFormat": "__auto", "range": false, "refId": "C"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "exemplar": false, "expr": "count(isf_nodes_info{name!=\"\", cluster!=\"\"} > 1) by (cluster) or \n(0 * count(isf_nodes_info{name!=\"\", cluster!=\"\"}) by (cluster))\n# creates a zero value for each cluster that has nodes", "format": "table", "hide": false, "instant": true, "legendFormat": "__auto", "range": false, "refId": "D"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "exemplar": false, "expr": "sum(isf_environment_risk) by (cluster)", "format": "table", "hide": false, "instant": true, "legendFormat": "__auto", "range": false, "refId": "B"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "exemplar": false, "expr": "count by (cluster) (isf_switches_info == 0) or \n(0 * count by (cluster) (isf_switches_info))\n#  return 0 for each cluster that has switches, indicating that all switches in those clusters are healthy.", "format": "table", "hide": false, "instant": true, "legendFormat": "__auto", "range": false, "refId": "E"}], "title": "Fleet Overview", "transformations": [{"id": "joinByField", "options": {"byField": "cluster", "mode": "outer"}}, {"id": "groupBy", "options": {"fields": {"Value #B": {"aggregations": ["lastNotNull"], "operation": "aggregate"}, "Value #C": {"aggregations": ["lastNotNull"], "operation": "aggregate"}, "Value #D": {"aggregations": ["last"], "operation": "aggregate"}, "Value #E": {"aggregations": ["lastNotNull"], "operation": "aggregate"}, "cluster": {"aggregations": [], "operation": "groupby"}, "env": {"aggregations": [], "operation": "groupby"}, "version": {"aggregations": ["lastNotNull"], "operation": "aggregate"}}}}, {"id": "organize", "options": {"excludeByName": {}, "includeByName": {}, "indexByName": {"Value #B (lastNotNull)": 6, "Value #C (lastNotNull)": 3, "Value #D (last)": 4, "Value #E (lastNotNull)": 5, "cluster": 0, "env": 1, "version (lastNotNull)": 2}, "renameByName": {"Value #B (lastNotNull)": "Risks", "Value #B (sum)": "Risks", "Value #C (count)": "Services", "Value #C (lastNotNull)": "Services", "Value #D (last)": "Nodes", "Value #E (lastNotNull)": "Switches", "cluster": "Name", "env": "Environment", "version (lastNotNull)": "Version"}}}], "type": "table"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "decimals": 0, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8}, "id": 1, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "expr": "sum by (service_name) (1 - isf_service)", "instant": false, "legendFormat": "__auto", "range": true, "refId": "A"}], "title": "Service Issues", "type": "timeseries"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "decimals": 0, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8}, "id": 4, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "expr": "sum(isf_environment_risk)", "instant": false, "legendFormat": "Total risks", "range": true, "refId": "A"}], "title": "Environmental Risks", "type": "timeseries"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "fieldConfig": {"defaults": {"color": {"mode": "thresholds", "seriesBy": "last"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "decimals": 0, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16}, "id": 2, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "expr": "count(count(isf_nodes_info{name!=\"\"} > 1) by (name)) or vector(0)\n# count of unique node names that have values greater than 1", "instant": false, "legendFormat": "Unhealthy Count", "range": true, "refId": "A"}], "title": "Node with Issues", "type": "timeseries"}, {"datasource": {"type": "prometheus", "uid": "000000001"}, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "decimals": 0, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 12, "y": 16}, "id": 3, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "000000001"}, "editorMode": "code", "expr": "count(count(isf_switches_info{name!=\"\"} == 0) by (name)) or vector(0)\n# count unique unhealthy switches", "instant": false, "legendFormat": "Unhealthy count", "range": true, "refId": "A"}], "title": "Switches with Issues", "type": "timeseries"}], "schemaVersion": 39, "tags": ["IBM Fusion", "v2.11"], "templating": {"list": []}, "time": {"from": "now-6h", "to": "now"}, "timepicker": {}, "timezone": "browser", "title": "IBM Fusion Fleet Dashboard", "version": 27, "weekStart": ""}
